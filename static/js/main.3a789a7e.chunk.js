(this.webpackJsonpQuestBook=this.webpackJsonpQuestBook||[]).push([[0],{145:function(e,t,n){e.exports=n(232)},232:function(e,t,n){"use strict";n.r(t);n(146),n(172),n(174),n(175),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214);var a=n(0),i=n.n(a),o=n(28),s=n.n(o),l=n(41),r=n.n(l),u=n(18),c=n(19),d=n(21),h=n(20),p=n(24),m=n(22),v=(n(222),n(6)),f=n(89),b=n.n(f),y=n(90),k=n.n(y),w=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(v.c,{title:this.props.name},i.a.createElement(v.a,{before:this.props.icon,onClick:function(){void 0!==e.props.onClick?e.props.onClick(e.props.id):console.warn("click event handler is "+e.props.onClick)}},this.props.text))}}]),t}(i.a.Component),g=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.quests.map((function(t){return i.a.createElement(w,{key:t.id,id:t.id,name:t.name,text:t.desc,author:t.author,onClick:e.props.onQuestButtonClick})}))}}]),t}(i.a.Component),E=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("img",{style:this.getStyle(),src:this.props.image,alt:this.props.image})}},{key:"getStyle",value:function(){return{height:"100%",width:"100%"}}}]),t}(i.a.Component),j=n(91),O=n.n(j),q=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return null!==this.props.actions?this.props.actions.map((function(t){return i.a.createElement(w,{icon:i.a.createElement(O.a,null),onClick:e.props.onButtonClick,key:t.id,id:t.id,text:t.text})})):null}}]),t}(i.a.Component),S=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).onShowAdditionalInfo=n.onShowAdditionalInfo.bind(Object(p.a)(n)),n.onCloseAdditionalInfo=n.onCloseAdditionalInfo.bind(Object(p.a)(n)),n.onSwipeMove=n.onSwipeMove.bind(Object(p.a)(n)),n.state={activeModal:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(null)}},{key:"render",value:function(){var e=this,t=this.props.globals.map((function(t,n){var a=n<e.props.globals.length-1?i.a.createElement(v.o,{style:{margin:"0"}}):null;switch(t.type){case 0:return i.a.createElement("div",{key:t.name},i.a.createElement(v.b,null,i.a.createElement(v.d,null,t.name,":"),i.a.createElement(v.d,{level:"secondary"},t.value)),a);case 1:var o=Number(t.value);return isNaN(o)?(console.warn("wrong global type %i value format %s",t.type,t.value),null):((o<0||o>100)&&(console.warn("wrong global type %i value %s",t.type,t.value),o=o<0?0:100),i.a.createElement("div",{key:t.name},i.a.createElement(v.b,null,i.a.createElement(v.d,null,t.name,":"),i.a.createElement(v.m,{value:o})),a));case 2:if(!Array.isArray(t.value))return console.warn("global type %i value is not an array: %s",t.type,t.value),null;var s=t.value.map((function(e){return i.a.createElement(v.d,{key:e,level:"secondary"},e)}));return i.a.createElement("div",{key:t.name},i.a.createElement(v.b,null,i.a.createElement(v.d,null,t.name,":"),i.a.createElement(v.g,null,s)),a)}}));return i.a.createElement(v.j,{activeModal:this.state.activeModal},i.a.createElement(v.h,{id:"info",header:i.a.createElement(v.i,null,"INFO"),onClose:this.onCloseAdditionalInfo},t))}},{key:"onShowAdditionalInfo",value:function(){this.setState({activeModal:"info"})}},{key:"onCloseAdditionalInfo",value:function(){this.setState({activeModal:null})}},{key:"onSwipeMove",value:function(e,t){var n=window.innerHeight/8;window.innerHeight-t.touches[0].clientY>window.innerHeight/3||Math.abs(e.y)>n&&this.onShowAdditionalInfo()}}]),t}(i.a.Component),I=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).onNodeActionClick=n.onNodeActionClick.bind(Object(p.a)(n)),n.state={quest:n.props.quest,activeNodeIdx:0,activeModal:null,isShowInventoryTip:n.props.isFirstLaunch},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this);var e=this.state.quest.nodes[this.state.activeNodeIdx];null===e.actions&&console.warn("actions is not set for node "+e.id),""===e.text&&console.warn("actions is not set for node "+e.id)}},{key:"componentWillUnmount",value:function(){this.props.onRef(null)}},{key:"render",value:function(){var e=this;if(this.state.activeNodeIdx<0||this.state.activeNodeIdx>=this.state.quest.nodes.length)return console.warn("activeNodeIdx is out of boundaries: "+this.state.activeNodeIdx),null;var t=this.state.quest.nodes[this.state.activeNodeIdx];return i.a.createElement(v.b,null,""!==t.image?i.a.createElement(E,{image:t.image}):null,i.a.createElement(v.c,null,i.a.createElement(v.b,null,""!==t.text?t.text:null)),i.a.createElement(v.q,{text:"To show additional info about your character current state swipe from bottom to top in lower quarter of the screen.",isShown:this.state.isShowInventoryTip,onClose:function(){e.setState({isShowInventoryTip:!1})}},i.a.createElement(v.c,null)),i.a.createElement(q,{actions:t.actions,onButtonClick:this.onNodeActionClick}),i.a.createElement(S,{onRef:function(t){return e.inventory=t},globals:this.state.quest.globals}))}},{key:"onNodeActionClick",value:function(e){var t=this.getAction(e);this.setState({activeNodeIdx:t.nextNodeId})}},{key:"getAction",value:function(e){for(var t=this.state.quest.nodes[this.state.activeNodeIdx],n=0;n<t.actions.length;n+=1){var a=t.actions[n];if(a.id===e)return a}}},{key:"onSwipeMove",value:function(e,t){this.inventory.onSwipeMove(e,t)}}]),t}(i.a.Component),C=n(92),x=n.n(C),Q="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",M=[{id:"0",nextNodeId:"1",type:0,text:"Some action text"},{id:"1",nextNodeId:"0",type:0,text:"Some text about how i like to do anything instead of my job"},{id:"2",nextNodeId:"1",type:0,text:"Some action text without any sense of logic"}],N=[{id:"0",text:Q,image:"https://cdn.akc.org/Marketplace/Breeds/Staffordshire_Bull_Terrier_SERP.jpg",actions:M},{id:"1",text:Q,image:"https://www.k9web.com/wp-content/uploads/2019/01/staffordshire-bull-terrier.jpg",actions:M}],A=[{type:0,name:"Money",value:"15000"},{type:0,name:"Authority",value:"1000"},{type:1,name:"Health Points",value:"100"},{type:1,name:"Manna",value:"100"},{type:1,name:"Quest Completion",value:"35"},{type:2,name:"Items",value:["Knife","Chair","Sugar"]}],B=[{id:"1",name:"Quest1",desc:"Lorem ipsum dolor sit amet",author:"Andrew Bamby",globals:A,nodes:N},{id:"2",name:"Second Quest",desc:"Some placeholder text about how cool this quest is",author:"Kremdlya ZhepbI",globals:A,nodes:N},{id:"3",name:"The third and the last quest",desc:"The most unbelievable quest on the planet Earth.Trust me.",author:"The most unbelievable man on the planet Mars",globals:A,nodes:N}],L="questList",T=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).osname=Object(v.s)(),n.requestQuests=n.requestQuests.bind(Object(p.a)(n)),n.onQuestButtonClick=n.onQuestButtonClick.bind(Object(p.a)(n)),n.onRequestBackToQuestList=n.onRequestBackToQuestList.bind(Object(p.a)(n)),n.onSwipeMove=n.onSwipeMove.bind(Object(p.a)(n)),n.state={activeView:L,activeQuest:null,quests:null,isFirstLaunch:!0},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.requestQuests()}},{key:"render",value:function(){var e=this;return null===this.state.quests?i.a.createElement(v.p,{size:"large"}):i.a.createElement(x.a,{onSwipeMove:this.onSwipeMove},i.a.createElement(v.n,{activeView:this.state.activeView},i.a.createElement(v.r,{activePanel:"questListPanel",id:L},i.a.createElement(v.k,{id:"questListPanel"},i.a.createElement(v.l,null,"Quests"),i.a.createElement(g,{quests:this.state.quests,onQuestButtonClick:this.onQuestButtonClick}))),i.a.createElement(v.r,{activePanel:"questPanel",id:"quest"},i.a.createElement(v.k,{id:"questPanel"},i.a.createElement(v.l,{left:i.a.createElement(v.e,{onClick:this.onRequestBackToQuestList},this.osname===v.f?i.a.createElement(k.a,null):i.a.createElement(b.a,null))},null!==this.state.activeQuest?this.state.activeQuest.name:null),null!==this.state.activeQuest?i.a.createElement(I,{onRef:function(t){return e.quest=t},quest:this.state.activeQuest,isFirstLaunch:this.state.isFirstLaunch}):i.a.createElement(v.p,{size:"large"})))))}},{key:"requestQuests",value:function(){this.setState({quests:B})}},{key:"getQuest",value:function(e){for(var t=0;t<this.state.quests.length;t+=1){var n=this.state.quests[t];if(n.id===e)return n}}},{key:"onRequestBackToQuestList",value:function(){this.setState({activeView:L,activeQuest:null})}},{key:"onQuestButtonClick",value:function(e){this.setState({activeView:"quest",activeQuest:this.getQuest(e)})}},{key:"onSwipeMove",value:function(e,t){0!==t.touches.length&&this.quest.onSwipeMove(e,t)}}]),t}(i.a.Component);r.a.send("VKWebAppInit"),s.a.render(i.a.createElement(T,null),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.3a789a7e.chunk.js.map